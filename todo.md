# Campus Navigator Web Game - 開發任務清單

## 文件資訊
- **專案名稱**: Campus Navigator Web Game
- **版本**: 2.0
- **最後更新**: 2025-10-18
- **當前進度**: 約 40% 完成

---

## 任務優先級說明

- 🔥 **最高優先級**: 必須立即處理的核心功能
- 🎯 **高優先級**: 近期需要完成的重要功能
- ⚠️ **中優先級**: 中期計畫功能
- 💡 **低優先級**: 優化和額外功能
- ✅ **已完成**: 已經完成的任務
- 🚧 **進行中**: 正在開發的任務

---

## 階段一：基礎架構 ✅ **已完成**

### 專案設定
- [x] 確認技術選型
- [x] 建立 Vite + React + TypeScript 專案
- [x] 設定 ESLint、Prettier、Tailwind CSS
- [x] 建立基本專案結構
- [x] 實作基礎 TypeScript interfaces
- [x] 設定 Zustand 狀態管理
- [x] 建立 Git 倉庫並完成初始 commit

**完成日期**: 2025-10-18

---

## 階段二：核心遊戲邏輯 🚧 **進行中**

### 地圖生成系統 ✅ **已完成**
- [x] 網格初始化
- [x] 地點放置演算法
- [x] 障礙物生成
- [x] 連通性驗證
- [x] 活動生成
- [x] 地圖資料驗證

**完成日期**: 2025-10-18

### 玩家移動系統 🎯 **高優先級 - 待開發**
- [ ] 實作鍵盤輸入處理
  - [ ] 方向鍵控制（↑↓←→）
  - [ ] WASD 鍵控制
  - [ ] 按鍵防抖動處理
- [ ] 實作玩家位置更新邏輯
  - [ ] 計算新位置
  - [ ] 驗證移動合法性
  - [ ] 更新玩家狀態
- [ ] 實作碰撞偵測系統
  - [ ] 邊界碰撞檢測
  - [ ] 障礙物碰撞檢測
  - [ ] 碰撞回饋（音效/視覺）
- [ ] 實作移動動畫
  - [ ] 平滑移動過渡
  - [ ] 方向轉換動畫
  - [ ] 移動音效整合
- [ ] 實作移動統計
  - [ ] 總移動次數計數
  - [ ] 碰撞次數計數
  - [ ] 移動歷史記錄

**預計完成**: 近期

### 地點互動系統 🎯 **高優先級 - 待開發**
- [ ] 實作地點訪問偵測
  - [ ] 玩家到達地點觸發
  - [ ] 地點狀態更新
  - [ ] 訪問標記邏輯
- [ ] 實作對話框系統
  - [ ] 對話框組件設計
  - [ ] 地點資訊顯示
  - [ ] 活動列表顯示
  - [ ] 對話框動畫效果
- [ ] 實作活動參加邏輯
  - [ ] 活動選擇介面
  - [ ] 活動參加確認
  - [ ] 活動狀態更新
  - [ ] 重複活動處理
- [ ] 實作得分計算系統
  - [ ] 地點訪問得分
  - [ ] 活動參加得分
  - [ ] 總分累加邏輯
  - [ ] 得分歷史記錄
- [ ] 實作場地預訂功能
  - [ ] 可預訂場地判斷
  - [ ] 預訂介面
  - [ ] 預訂狀態管理
  - [ ] 預訂獎勵發放

**預計完成**: 近期

---

## 階段三：等距視角渲染 🔥 **最高優先級**

### 座標轉換系統 ✅ **已完成**
- [x] 實作等距座標轉換工具（IsometricTransform.ts）
- [x] 網格到等距座標轉換
- [x] 等距座標到網格轉換

**完成日期**: 2025-10-18

### Canvas 渲染系統 🔥 **最高優先級 - 待開發**
- [ ] 建立 Canvas 渲染器類別
  - [ ] IsometricRenderer 基礎類別
  - [ ] Canvas 初始化
  - [ ] 渲染循環設計
  - [ ] 效能優化設置
- [ ] 實作地圖磚塊渲染
  - [ ] 等距菱形磚塊繪製
  - [ ] 不同地形類型渲染
  - [ ] 邊界磚塊特殊處理
  - [ ] 網格線顯示（可選）
- [ ] 實作建築物精靈渲染
  - [ ] 建築物精靈載入
  - [ ] 等距建築物繪製
  - [ ] 建築物陰影效果
  - [ ] 建築物動畫（可選）
- [ ] 實作玩家精靈渲染
  - [ ] 玩家精靈載入（8方向）
  - [ ] 玩家位置繪製
  - [ ] 玩家方向動畫
  - [ ] 玩家移動動畫
- [ ] 實作分層渲染系統
  - [ ] 地面層（GROUND）
  - [ ] 裝飾層（DECORATION）
  - [ ] 建築層（BUILDING）
  - [ ] 角色層（CHARACTER）
  - [ ] 特效層（EFFECT）
  - [ ] UI層（UI）
  - [ ] Z-index 排序邏輯
- [ ] 實作相機系統
  - [ ] 相機跟隨玩家
  - [ ] 視角偏移計算
  - [ ] 平滑相機移動
  - [ ] 視野邊界限制
- [ ] 替換文字模式
  - [ ] 移除文字模式地圖
  - [ ] 整合 Canvas 到主介面
  - [ ] 效能測試與優化
  - [ ] 視覺效果調整

**預計完成**: 急迫

---

## 階段四：UI/UX 完善 ⚠️ **中優先級**

### 主選單系統
- [ ] 設計並實作完整主選單
  - [ ] 「開始新遊戲」按鈕 ✅
  - [ ] 「載入遊戲」按鈕
  - [ ] 「排行榜」按鈕
  - [ ] 「設定」按鈕
  - [ ] 「關於」按鈕
  - [ ] 「退出」按鈕
- [ ] 主選單動畫效果
- [ ] 背景音樂整合

### 遊戲 HUD
- [x] 基礎 HUD 顯示 ✅
- [ ] HUD 視覺優化
  - [ ] 分數顯示美化
  - [ ] 時間顯示加入
  - [ ] 統計資訊圖示化
  - [ ] 進度條設計
- [ ] HUD 動畫效果
  - [ ] 分數增加動畫
  - [ ] 任務完成提示
  - [ ] 成就解鎖通知

### 對話框系統
- [ ] 對話框組件設計
  - [ ] 地點訪問對話框
  - [ ] 活動選擇對話框
  - [ ] 確認對話框
  - [ ] 資訊提示對話框
- [ ] 對話框動畫
  - [ ] 淡入淡出效果
  - [ ] 滑動效果
  - [ ] 按鈕互動回饋

### 統計面板
- [ ] 設計統計面板 UI
- [ ] 即時統計更新
- [ ] 圖表視覺化
- [ ] 歷史記錄顯示

### 小地圖
- [ ] 小地圖組件設計
- [ ] 地圖縮略圖渲染
- [ ] 玩家位置標記
- [ ] 已訪問/未訪問地點區分
- [ ] 小地圖點擊導航（可選）

### 暫停選單
- [ ] 暫停選單設計
- [ ] 繼續遊戲功能
- [ ] 存檔功能
- [ ] 返回主選單功能
- [ ] 設定調整功能

### 結算畫面
- [ ] 結算畫面設計
- [ ] 最終統計顯示
- [ ] 成就總結
- [ ] 排行榜更新
- [ ] 分享功能（可選）

---

## 階段五：資料持久化 ⚠️ **中優先級**

### LocalStorage 整合
- [ ] 實作 LocalStorage 封裝工具
- [ ] 資料驗證機制
- [ ] 版本相容性處理
- [ ] 錯誤處理

### 遊戲存檔系統
- [ ] 存檔資料結構設計
- [ ] 實作遊戲儲存功能
  - [ ] 地圖狀態儲存
  - [ ] 玩家狀態儲存
  - [ ] 遊戲進度儲存
- [ ] 自動儲存功能
- [ ] 多存檔支援（可選）

### 遊戲載入系統
- [ ] 實作遊戲載入功能
- [ ] 存檔列表顯示
- [ ] 存檔預覽功能
- [ ] 載入失敗處理

### 排行榜系統
- [ ] 排行榜資料結構
- [ ] 實作分數記錄
- [ ] 實作排行榜顯示
- [ ] 排序與篩選功能
- [ ] 保留 Top 10 記錄

### 設定儲存
- [ ] 設定資料結構
- [ ] 音效設定儲存
- [ ] 音量設定儲存
- [ ] UI 顯示設定儲存
- [ ] 設定套用邏輯

---

## 階段六：音效與動畫 💡 **低優先級**

### 音效管理器
- [ ] 實作 SoundManager 類別
- [ ] 音效載入機制
- [ ] 音量控制
- [ ] 音效播放佇列

### 背景音樂
- [ ] 選擇/製作背景音樂
- [ ] 主選單音樂
- [ ] 遊戲進行音樂
- [ ] 音樂循環播放
- [ ] 音樂淡入淡出

### 互動音效
- [ ] 移動音效
- [ ] 碰撞音效
- [ ] 到達地點音效
- [ ] 按鈕點擊音效
- [ ] 得分音效
- [ ] 成就解鎖音效

### 精靈動畫
- [ ] 玩家行走動畫（8方向）
- [ ] 玩家待機動畫
- [ ] 建築物動畫效果
- [ ] 地點特效動畫

### 特效系統
- [ ] 粒子特效系統
- [ ] 到達地點特效
- [ ] 活動完成特效
- [ ] 成就解鎖特效
- [ ] UI 過渡特效

---

## 階段七：成就系統 💡 **低優先級**

### 成就定義
- [ ] 定義成就清單
  - [ ] 探索類成就
  - [ ] 效率類成就
  - [ ] 挑戰類成就
  - [ ] 收集類成就
- [ ] 成就資料結構設計
- [ ] 成就圖示設計

### 成就檢查邏輯
- [ ] 實作成就檢查系統
- [ ] 即時成就偵測
- [ ] 成就進度追蹤
- [ ] 成就解鎖條件驗證

### 成就解鎖動畫
- [ ] 成就解鎖通知設計
- [ ] 解鎖動畫效果
- [ ] 解鎖音效
- [ ] 成就展示動畫

### 成就面板
- [ ] 成就列表 UI 設計
- [ ] 已解鎖/未解鎖區分
- [ ] 成就進度顯示
- [ ] 成就詳細資訊

---

## 階段八：測試與優化 ⚠️ **中優先級**

### 單元測試
- [ ] MapGenerator 測試
- [ ] CollisionSystem 測試
- [ ] PathFinding 測試
- [ ] IsometricTransform 測試
- [ ] Store 測試
- [ ] 工具函數測試

### 整合測試
- [ ] 遊戲流程測試
- [ ] 玩家移動整合測試
- [ ] 地點互動整合測試
- [ ] 存檔載入整合測試

### E2E 測試
- [ ] 完整遊戲流程測試
- [ ] 跨瀏覽器測試
- [ ] 效能測試
- [ ] 使用者體驗測試

### 效能優化
- [ ] 渲染效能優化
- [ ] 記憶體使用優化
- [ ] 載入時間優化
- [ ] 響應速度優化

### Bug 修復
- [ ] 建立 Bug 追蹤系統
- [ ] 已知問題修復
- [ ] 測試回歸

---

## 階段九：部署 💡 **低優先級**

### 版本控制
- [x] 建立 GitHub Repository ✅
- [ ] 設定分支策略
- [ ] 建立 Release 流程
- [ ] 版本標籤管理

### CI/CD
- [ ] 設定 GitHub Actions
- [ ] 自動化測試流程
- [ ] 自動化建構流程
- [ ] 自動化部署流程

### 部署
- [ ] 選擇部署平台（Vercel/Netlify）
- [ ] 設定部署配置
- [ ] 環境變數設定
- [ ] 域名設定（可選）

### 文件
- [ ] 撰寫完整 README
- [ ] 撰寫使用手冊
- [ ] 撰寫開發者文件
- [ ] 撰寫 API 文件（如需要）

---

## 額外優化項目 💡 **低優先級**

### 可訪問性
- [ ] 鍵盤導航支援
- [ ] 螢幕閱讀器支援
- [ ] 高對比模式
- [ ] 字體大小調整

### 多語言支援
- [ ] 建立 i18n 框架
- [ ] 繁體中文（預設）
- [ ] 英文
- [ ] 其他語言（可選）

### 進階功能
- [ ] 多人排行榜（線上）
- [ ] 社交分享功能
- [ ] 自訂地圖編輯器
- [ ] 挑戰模式
- [ ] 每日任務

### PWA 支援
- [ ] Service Worker 設定
- [ ] 離線功能
- [ ] 安裝提示
- [ ] 推送通知（可選）

---

## 當前優先級排序

### 🔥 最高優先級（立即著手）
1. **Canvas 等距視角渲染系統**
   - 建立 IsometricRenderer 類別
   - 實作地圖磚塊渲染
   - 實作玩家精靈顯示
   - 替換文字模式

### 🎯 高優先級（近期完成）
2. **玩家移動系統**
   - 鍵盤輸入處理
   - 碰撞偵測
   - 移動動畫

3. **地點互動系統**
   - 地點訪問邏輯
   - 對話框系統
   - 活動參加機制

### ⚠️ 中優先級（中期計畫）
4. UI/UX 完善
5. 資料持久化
6. 測試與優化

### 💡 低優先級（後期優化）
7. 音效與動畫
8. 成就系統
9. 部署與文件

---

## 每日進度追蹤

### 2025-10-18
- ✅ 完成專案基礎架構
- ✅ 完成地圖生成系統
- ✅ 完成測試劇本與報告
- ✅ 建立 Git 倉庫
- ✅ 更新規格書至 v2.1.0
- 📝 建立 todo.md 工作清單

### 下一個工作日
- 🔥 開始實作 Canvas 渲染系統
- 🎯 設計玩家移動邏輯

---

## 備註

- 本清單會隨開發進度持續更新
- 優先級可能會根據實際狀況調整
- 相關文件：
  - 規格文件：`spec.md`
  - 測試劇本：`script.md`
  - 測試報告：`test-report.md`
  - 開發文件：`DEVELOPMENT.md`

**最後更新**: 2025-10-18
**維護者**: Campus Navigator Development Team
